<!DOCTYPE html>
<html>
<head>
  <title>Bus Tracker</title>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC3JfCzEIyT19iu39O236wl-AVdAiEu8uM"></script>
  <script>
    let map, marker;

    async function fetchLocation() {
      const response = await fetch("http://127.0.0.1:8000/bus/");
      const data = await response.json();
      const position = { lat: data.lat, lng: data.lng };

      if (!marker) {
        marker = new google.maps.Marker({
          position,
          map,
          title: "Bus"
        });
      } else {
        marker.setPosition(position);
      }
    }

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 10.048, lng: 76.327 },
        zoom: 15
      });

      fetchLocation();
      setInterval(fetchLocation, 5000); // update every 5 seconds
    }
  </script>
</head>
<body onload="initMap()">
  <h2>Live Bus Tracker</h2>
  <div id="map" style="height:500px; width:100%;"></div>
</body>
</html>
